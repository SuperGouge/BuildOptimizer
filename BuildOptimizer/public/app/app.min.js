var app=angular.module("BuildOptimizer",["ngRoute","ngResource","ui.bootstrap"]);app.config(["$routeProvider",function(t){t.when("/",{templateUrl:"app/views/home.html",controller:"HomeCtrl"}).when("/champion/:championId",{templateUrl:"app/views/champion.html",controller:"ChampionCtrl"}).when("/:region/match/:matchId/summoner/:summonerId",{templateUrl:"app/views/match.html",controller:"MatchCtrl"}).otherwise({redirectTo:"/"})}]).config(["$compileProvider",function(t){t.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|file|blob):/)}]).controller("MainCtrl",["$scope","$route","$routeParams","$location",function(t,e,n,i){t.$on("$routeChangeSuccess",function(e,n,o){t.location=i,t.activeViewPath=i.path()})}]),angular.module("BuildOptimizer").constant("BASE_URL",location.protocol+"//"+location.host).constant("API_BASE_URL",location.protocol+"//"+location.host+"/api/").constant("REGIONS",["br","eune","euw","kr","lan","las","na","oce","ru","tr"]).constant("REGIONS_PBE",["br","eune","euw","kr","lan","las","na","oce","ru","tr","pbe"]),angular.module("BuildOptimizer").controller("ChampionCtrl",["$scope","$routeParams","$location","Champion","Pro","Match","Version",function(t,e,n,i,o,a,r){t.version="5.17.1",r.query(function(e){t.version=e[0]}),t.champion=i.get({championId:e.championId},function(e){t.champion=e.toJSON()}),t.matches=[],o.query({championId:e.championId},function(e){var n=e.sort(function(t,e){return t.timestamp<e.timestamp});n.length>12&&(n=n.slice(0,12)),angular.forEach(n,function(e){a.get({region:e.region,matchId:e.matchId},function(n){n=n.toJSON();for(var i={region:e.region,matchId:e.matchId},o=0;o<n.participantIdentities.length;o++)if(n.participantIdentities[o].player.summonerId===e.summonerId){i.participantId=o+1,i.player=n.participantIdentities[o].player,i.data=n.participants[o];break}t.matches.push(i)})})}),t.selectMatch=function(t){n.path("/"+t.region+"/match/"+t.matchId+"/summoner/"+t.player.summonerId)}}]),angular.module("BuildOptimizer").controller("HomeCtrl",["$scope","$location","Champion",function(t,e,n){t.loading=!0,t.champions=n.query(function(e){t.champions=e,t.loading=!1}),t.selectChampion=function(n){for(var i=0;i<t.champions.length;i++){var o=t.champions[i];o.name===n&&e.path("/champion/"+o.id)}}}]),angular.module("BuildOptimizer").controller("MatchCtrl",["$scope","$routeParams","$location","Champion","Pro","Match","Version","REGIONS",function(t,e,n,i,o,a,r,c){t.version="5.17.1",r.query(function(e){t.version=e[0]}),t.match=a.get({region:e.region,matchId:e.matchId,includeTimeline:!0},function(n){n=n.toJSON();for(var o={region:e.region,matchId:e.matchId},a=0;a<n.participantIdentities.length;a++)n.participantIdentities[a].player.summonerId===parseInt(e.summonerId,10)&&(o.participantId=a+1,o.player=n.participantIdentities[a].player,o.data=n.participants[a]);o.events=[];for(var r=0;r<n.timeline.frames.length;r++){var c=n.timeline.frames[r];if(c.events)for(var m=0;m<c.events.length;m++){var p=c.events[m];p.participantId===o.participantId&&0===p.eventType.indexOf("ITEM_")&&"ITEM_DESTROYED"!==p.eventTyp&&o.events.push(p)}}o.items=o.events.filter(function(t){return"ITEM_PURCHASED"===t.eventType}),t.match=o,t.champion=i.get({championId:t.match.data.championId},function(e){t.champion=e.toJSON();for(var n={title:t.champion.name,type:"custom",map:"SR",mode:"CLASSIC",blocks:[{type:"Starting Items",items:[]},{type:"First Back",items:[]},{type:"Core",items:[]},{type:"Late Game",items:[]}]},i=0;i<o.items.length;i++){var a=o.items[i],r={id:a.itemId.toString(),count:1};a.timestamp<=18e4?n.blocks[0].items.push(r):a.timestamp>18e4&&a.timestamp<=6e5?n.blocks[1].items.push(r):a.timestamp>6e5&&a.timestamp<=15e5?n.blocks[2].items.push(r):a.timestamp>15e5&&n.blocks[3].items.push(r)}for(var c=0;c<n.blocks.length;c++){for(var m={},p=n.blocks[c],s=0;s<p.items.length;s++)m.hasOwnProperty(p.items[s].id)?m[p.items[s].id]++:m[p.items[s].id]=1;n.blocks[c].items=function(t){return Object.keys(t).map(function(e){return{id:e,count:t[e]}})}(m)}t.itemSet=n;var l=new Blob([JSON.stringify(n)],{type:"application/json;charset=utf-8;"});t.url=(window.URL||window.webkitURL).createObjectURL(l)})})}]),angular.module("BuildOptimizer").factory("Champion",["$resource","$http","API_BASE_URL",function(t,e,n){return t(n+"lol-static-data/:region/champion/:championId",{region:"na"},{query:{method:"GET",params:{},isArray:!0,transformResponse:[].concat(e.defaults.transformResponse).concat(function(t,e,n){return Object.keys(t.data).map(function(e){return t.data[e]}).sort(function(t,e){return t.name>e.name})})},get:{method:"GET",params:{}}})}]),angular.module("BuildOptimizer").factory("Match",["$resource","API_BASE_URL",function(t,e){return t(e+"match/:region/:matchId")}]),angular.module("BuildOptimizer").factory("Pro",["$resource","API_BASE_URL",function(t,e){return t(e+"pro/:championId")}]),angular.module("BuildOptimizer").factory("Version",["$resource","$http","API_BASE_URL",function(t,e,n){return t(n+"lol-static-data/:region/versions",{region:"na"})}]);
//# sourceMappingURL=app.min.js.map